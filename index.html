<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Giggity Files</title>
<link rel="manifest" href="./site.webmanifest">
  <!-- Google Fonts: Oswald -->
  <link href="https://fonts.googleapis.com/css2?family=Oswald&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Oswald', sans-serif;
      background: #111;
      color: #fff;
      margin: 0;
      padding: 0;
    }
    header {
      background: #b30000;
      padding: 20px;
      text-align: center;
      border-bottom: 4px solid #ffcc00;
    }
    header h1 {
      margin: 0;
      font-size: 2.5em;
      color: #ffcc00;
      text-shadow: 2px 2px 0 #000;
    }
    #quote {
      margin-top: 8px;
      font-style: italic;
      font-size: 1.1em;
    }
    #visit-bar {
      background: #000;
      padding: 10px;
      text-align: center;
    }
    #repos, #files {
      padding: 20px;
    }
    a {
      color: #0af;
      text-decoration: none;
      font-weight: bold;
    }
    a:hover {
      text-decoration: underline;
    }
    ul {
      list-style: none;
      padding-left: 20px;
    }
    li {
      margin: 8px 0;
      display: flex;
      align-items: center;
    }
    li img {
      width: 18px;
      height: 18px;
      margin-right: 8px;
    }
    .breadcrumbs {
      margin: 10px 0;
      font-size: 0.9em;
      font-weight: bold;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      gap: 4px;
    }
    .breadcrumbs a {
      color: #ffcc00;
      cursor: pointer;
    }
    footer {
      margin-top: 30px;
      padding: 15px;
      background: #222;
      text-align: center;
      font-size: 0.9em;
      color: #ccc;
      border-top: 3px solid #b30000;
    }
    .promo-section {
      margin-top: 15px;
      padding: 10px;
      background: #333;
      text-align: center;
      border-radius: 6px;
    }
    .promo-section a {
      color: #ffcc00;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <header>
    <h1>Giggity Files</h1>
    <p id="quote"></p>
  </header>

  <!-- Site visit bar using image only -->
  <div id="visit-bar">
    <img src="https://visit-counter.vercel.app/counter.png?page=giggityfiles.github.io&s=40&c=00ff00&bg=000000&no=2&ff=digii&tb=We+have+&ta=+Visits" 
         alt="Visitor Counter">
  </div>

  <div class="breadcrumbs" id="breadcrumbs"></div>
  <div id="repos"></div>
  <div id="files"></div>

  <footer>
    Note: Some Windows applications might not work on macOS, Android, or Linux without Wine.
    <div class="promo-section">
      <a href="https://giggityfiles.github.io/ads" target="_blank">Advertise Us!</a> | <a href="https://giggityfiles.github.io/pullreq" target="_blank">Request Files</a>
    </div>
  </footer>

  <script>
    const API_URL = "https://api.github.com/users/giggityfiles/repos";
    const BASE_URL = "https://giggityfiles.github.io/";
    const ICON_URL = "https://img.icons8.com/?size=256&id=1u78UgAkC1bw&format=png";

    // Quotes
    const commonQuotes = [
      "Heh heh, oh yeah!", "Itâ€™s gonna be a good night, giggity.",
      "Giggity giggity goo!", "Alright!", "Yeah, baby! Giggity!",
      "You know what time it is... Giggity time!", "Hey, neighbor! Giggity giggity!"
    ];
    const rareQuotes = [
      "JOE: Bring it on!",
      "CLEVELAND: Oh, that's nasty.",
      "PETER: Freakin' sweet!",
      "PLANKTON: Dr. Jr."
    ];

    function randomQuote() {
      let chance = Math.floor(Math.random() * 50000) + 1;
      if (chance === 1) return "PLANKTON: Dr. Jr.";
      if (chance <= 10) return rareQuotes[Math.floor(Math.random() * rareQuotes.length)];
      return commonQuotes[Math.floor(Math.random() * commonQuotes.length)];
    }

    document.getElementById("quote").innerText = randomQuote();

    // Random chance to apply Roboto font
    if (Math.floor(Math.random() * 10000) === 0) {
      let elements = document.querySelectorAll("*");
      let randomElement = elements[Math.floor(Math.random() * elements.length)];
      randomElement.style.fontFamily = "Roboto, sans-serif";
    }

    // Load repo list
    async function loadRepos() {
      try {
        const response = await fetch(API_URL);
        const repos = await response.json();
        const repoList = document.getElementById("repos");
        repoList.innerHTML = "<h2>Repositories</h2><ul>" +
          repos
            .filter(repo => repo.name !== "main" && repo.name !== "giggityfiles.github.io")
            .map(repo => `<li><img src="${ICON_URL}"/><a href="#" onclick="loadFiles('${repo.name}')">${repo.name}</a></li>`)
            .join('') +
          "</ul>";
      } catch (err) {
        document.getElementById("repos").innerText = "Failed to load repositories.";
      }
    }

    async function loadFiles(repo, path = "") {
      const filesContainer = document.getElementById("files");
      const breadcrumbs = document.getElementById("breadcrumbs");
      try {
        const apiUrl = `https://api.github.com/repos/giggityfiles/${repo}/contents/${path}`;
        const response = await fetch(apiUrl);
        const files = await response.json();

        // Breadcrumbs
        const parts = path.split("/").filter(Boolean);
        let breadcrumbHTML = `<a onclick="loadRepos()">Home</a> / <a onclick="loadFiles('${repo}')">${repo}</a>`;
        parts.forEach((part, idx) => {
          const subPath = parts.slice(0, idx + 1).join("/");
          breadcrumbHTML += ` / <a onclick="loadFiles('${repo}', '${subPath}')">${part}</a>`;
        });
        breadcrumbs.innerHTML = breadcrumbHTML;

        // Files
        filesContainer.innerHTML = "<h2>Files</h2><ul>" +
          files.map(file =>
            `<li><img src="${ICON_URL}"/>
              ${file.type === "dir"
                ? `<a href="#" onclick="loadFiles('${repo}', '${file.path}')">${file.name}</a>`
                : `<a href="${BASE_URL}${repo}/${file.path}" target="_blank">${file.name}</a>
                   <button onclick="window.open('${BASE_URL}${repo}/${file.path}')">Download</button>`}
            </li>`
          ).join('') +
          "</ul>";
      } catch (err) {
        filesContainer.innerText = "Failed to load files.";
      }
    }

    loadRepos();
  </script>
</body>
</html>
